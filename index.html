<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CYBER CHALLENGE - Boss Fight Finale</title>
    <style id="dynamic-style"></style>
</head>
<body>
    <canvas class="matrix-bg" id="matrix"></canvas>
    
    <div class="container" id="gameContainer">
        <h1 id="mainTitle">⚡ CYBER CHALLENGE ⚡</h1>
        <p class="subtitle">Decodifica il mistero nascosto...</p>
        
        <div id="startScreen" class="start-screen">
            <h2>Benvenuto in CYBER CHALLENGE</h2>
            <p class="start-description">Metti alla prova le tue abilità di critto-hacker: decodifica cifrature, supera i livelli e sconfiggi il Boss finale.</p>
            <div class="start-buttons">
                <button id="startGameBtn">Inizia nuova sfida</button>
                <button id="continueGameBtn" class="hidden">Continua partita</button>
            </div>
        </div>

        <div class="stats hidden" id="statsPanel">
            <div class="stat-item">
                <div class="stat-label">LIVELLO</div>
                <div class="stat-value" id="levelDisplay">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">TENTATIVI FALLITI</div>
                <div class="stat-value" id="failedAttempts">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">STRINGHE RISOLTE</div>
                <div class="stat-value" id="totalSolved">0</div>
            </div>
        </div>

        <div id="gameContent"></div>
        
        <!-- Tutorial rimosso -->
    </div>

    <!-- Bottone help rimosso -->

    <button id="guideFab" class="guide-fab" aria-label="Guida alle cifrature" title="Guida alle cifrature">?</button>

    <audio id="correct-sound" src="correct.mp3"></audio>
    <audio id="incorrect-sound" src="incorrect.mp3"></audio>
    <audio id="levelup-sound" src="levelup.mp3"></audio>
    <script>
        // Caricamento dinamico degli stili
        const loadStyles = () => {
            const styleContent = `
                @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@400;600&display=swap');
                ${localStorage.getItem('savedStyles') || ''}
            `;
            document.getElementById('dynamic-style').textContent = styleContent;
            
            // Caricamento dello script
            const script = document.createElement('script');
            script.src = 'game.js';
            script.defer = true;
            document.body.appendChild(script);
        };
        
        // Carica gli stili e lo script quando il DOM è pronto
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', loadStyles);
        } else {
            loadStyles();
        }
    </script>
</body>
</html>